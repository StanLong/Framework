# 入门案例

## IOC

由Spring创建对象实例即 IoC 控制反转（Inverse of Control），需要实例对象时，从spring工厂（容器）中获得，需要将实现类的全限定名称配置到xml文件中

目录结构

![](https://cdn.jsdelivr.net/gh/StanLong/Framework/03Spring/doc/01.png)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>org.example</groupId>
  <artifactId>Spring</artifactId>
  <version>1.0-SNAPSHOT</version>

  <!-- 基础包：beans,context,core,expression.
       依赖包：commons-logging -->
  <dependencies>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>5.3.19</version>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>5.3.19</version>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-core</artifactId>
      <version>5.3.19</version>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-expression</artifactId>
      <version>5.3.19</version>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring</artifactId>
      <version>5.3.19</version>
      <type>pom</type>
    </dependency>
    <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter</artifactId>
      <version>RELEASE</version>
      <scope>compile</scope>
    </dependency>

  </dependencies>

  <!-- 
    对于maven项目，如果代码中找不到xml路径，排查问题方式如下
    1、先确定xml文件名称是否一致
    2、如果xml文件是在Java目录下，需要在pom文件中添加这段代码
  -->
  <build>
    <resources>
      <resource>
        <directory>src/main/java</directory>
        <includes>
          <include>**/*.xml</include>
        </includes>
      </resource>
    </resources>
  </build>

</project>
```

applicationContext.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        				   http://www.springframework.org/schema/beans/spring-beans.xsd">
	<!-- 配置Service 
		<bean> 配置需要创建的对象
			id:用于之后从Spring 容器中获得实例时使用的
			class:需要创建实例的全限定类名
	-->
	<bean id="userServiceId" class="com.stanlong.spring.UserServiceImpl"></bean>
	
</beans>
```

```java
package com.stanlong.spring;

public interface UserService {
    public void addUser();
}
```

```java
package com.stanlong.spring;

public class UserServiceImpl implements UserService{
    @Override
    public void addUser() {
        System.out.println("ioc addUser");
    }
}

```

```java
package com.stanlong.spring;


import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class TestIoC {
    @Test
    public void demo01() {
        // 以前的写法
        System.out.println("new 创建对象");
        UserService userService = new UserServiceImpl();
        userService.addUser();
    }

    @Test
    public void demo02() {
        // 新的写法
        // 1、获得Spring容器
        System.out.println("Spring IOC 创建对象");
        String xmlPath = "com/stanlong/spring/applicationContext.xml";
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);
        // 2、由Spring 容器创建对象
        UserService userService = (UserService) applicationContext.getBean("userServiceId");
        userService.addUser();
    }
}
```

## DI

