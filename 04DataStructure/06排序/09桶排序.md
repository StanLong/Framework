# 桶排序

https://blog.csdn.net/csdnsevenn/article/details/83218431

**当数列取值范围过大，或者不是整数时，这种情况就不适合使用计数排序。可以使用桶排序来解决问题。**

桶排序的基本思想是：把数组 arr 划分为n个大小相同子区间（桶），每个子区间各自排序，最后合并。计数排序是桶排序的一种特殊情况，可以把计数排序当成每个桶里只有一个元素的情况。

![](.././doc/08.png)

过程分析:

1. 找出待排序数组中的最大值max、最小值min
2. 我们使用 动态数组ArrayList 作为桶，桶里放的元素也用 ArrayList 存储。
3. 遍历数组 arr，计算每个元素 arr[i] 放的桶
4. 每个桶各自排序
5. 遍历桶数组，把排序好的元素放进输出数组

## Java版

```java
package com.stanlong;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.LinkedList;

/**
 * 桶排序：
 */
public class DataStructure {

    public static void main(String[] args) throws Exception {
        double[] array = {4.12,6.421,0.0023,3.0,2.123,8.122,4.12, 10.09};
        double[] result = countSort(array);
        System.out.println(Arrays.toString(result));
    }

    /**
     * 桶排序排序
     * @param array 待排序数组
     */
    public static double[] countSort(double array[]){
        // 1. 取出array的最大值和最小值
        double max = Integer.MIN_VALUE;
        double min = Integer.MAX_VALUE;
        for(double data : array){
            max = Math.max(max, data);
            min = Math.min(min, data);
        }

        // 2. 计算极差
        double range = max - min;

        // 3. 初始化桶
        int bucketNum = array.length; // 确定桶的个数
        ArrayList<LinkedList<Double>> bucketList = new ArrayList<LinkedList<Double>>(bucketNum);
        for(int i=0; i < bucketNum; i++){
            bucketList.add(new LinkedList<Double>());
        }

        // 4. 遍历原始数组，将每个元素放入桶中
        for(int i=0; i< array.length; i++){
            // 定位元素属于第几个桶，是按照比例来定位：
			//(array[i] - min)  * (bucketNum-1) / range
            
            int num = (int)((array[i]-min)*(bucketNum-1)/range);
            bucketList.get(num).add(array[i]);
        }

        // 5. 对每个桶内部进行排序
        for(int i=0; i<bucketList.size(); i++){
            //JDK底层采用了归并排序或归并的优化版本
            Collections.sort(bucketList.get(i));
        }

        // 6. 保存排序后的结果
        double[] result = new double[array.length];
        int index = 0;
        for(LinkedList<Double> list : bucketList){
            for(double data : list){
                result[index] = data;
                index++;
            }
        }
        return result;

    }
}
```

