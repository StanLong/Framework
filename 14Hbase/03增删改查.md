# 命名空间的增删改查

进入shell界面

```shell
[root@node02 ~]# hbase shell
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/opt/stanlong/hbase/hbase-1.3.6/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/opt/stanlong/hadoop-ha/hadoop-2.9.2/share/hadoop/common/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 1.3.6, r806dc3625c96fe2cfc03048f3c54a0b38bc9e984, Tue Oct 15 01:55:41 PDT 2019

hbase(main):001:0> 
```

## 增

```shell
hbase(main):010:0> create_namespace 'hadoop_hbsae'
0 row(s) in 0.9030 seconds
```

## 查

```sql
hbase(main):011:0> list_namespace
NAMESPACE                                                                                                                                         
default                                                                                                                                           
hadoop_hbsae         # 新增的命名空间，相当于mysql里的database                                                                                                                               
hbase                                                                                                                                             
3 row(s) in 0.0570 seconds
```

## 删

删除命名空间之前需要先清空里面的表

```shell
hbase(main):005:0> disable 'hadoop_hbae:person'
0 row(s) in 2.3530 seconds

hbase(main):006:0> drop 'hadoop_hbae:person'
0 row(s) in 1.3230 seconds

hbase(main):008:0> drop_namespace 'hadoop_hbae'
0 row(s) in 0.8940 seconds
```

# 表的增删改查

## 增

语法: create '表名','列族'

```
hbase(main):001:0> create 'person','info'
0 row(s) in 5.8030 seconds

=> Hbase::Table - person
```

建表时指定命名空间

```sql
hbase(main):003:0> create 'hadoop_hbase:person','info'
0 row(s) in 4.5650 seconds

=> Hbase::Table - hadoop_hbase:person
---------------------------------------------------------------------------------------
hbase(main):004:0> list
TABLE                                                                                                                                             
hadoop_hbase:person   # 未指定命名空间的表默认建在default下                                                                                                                             
1 row(s) in 0.0410 seconds

=> ["hadoop_hbae:person"]

```

## 查

**list** : 查看当前namespace里有哪些表

**describe** ：查看表的描述信息

```shell
hbase(main):002:0> list
TABLE                                                                                                                                             
person       # 建的person表                                                                                                                                      
1 row(s) in 0.0520 seconds

=> ["person"]
---------------------------------------------------------------------------------------
hbase(main):004:0> describe 'person'
Table person is ENABLED                                                                                                                           
person                                                                                                                                            
COLUMN FAMILIES DESCRIPTION                                                                                                                       
{NAME => 'info', BLOOMFILTER => 'ROW', VERSIONS => '1', IN_MEMORY => 'false', KEEP_DELETED_CELLS => 'FALSE', DATA_BLOCK_ENCODING => 'NONE', TTL =>
 'FOREVER', COMPRESSION => 'NONE', MIN_VERSIONS => '0', BLOCKCACHE => 'true', BLOCKSIZE => '65536', REPLICATION_SCOPE => '0'}                     
1 row(s) in 0.1380 seconds
```

## 改

将info列族中的VERSIONS改成3

语法: alter '表名',{NAME=>'列族', VERSIONS=>'要修改的值'}

```shell
hbase(main):005:0> alter 'person',{NAME=>'info',VERSIONS=>3}
Updating all regions with the new schema...
0/1 regions updated.
1/1 regions updated.
Done.
0 row(s) in 3.7340 seconds
---------------------------------------------------------------------------------------
hbase(main):006:0> describe 'person'
Table person is ENABLED                                                                                                                           
person                                                                                                                                            
COLUMN FAMILIES DESCRIPTION                                                                                                                       
{NAME => 'info', BLOOMFILTER => 'ROW', VERSIONS => '3', IN_MEMORY => 'false', KEEP_DELETED_CELLS => 'FALSE', DATA_BLOCK_ENCODING => 'NONE', TTL =>
 'FOREVER', COMPRESSION => 'NONE', MIN_VERSIONS => '0', BLOCKCACHE => 'true', BLOCKSIZE => '65536', REPLICATION_SCOPE => '0'}                     
1 row(s) in 0.0680 seconds
```

## 删

删除表首先需要先让该表为disable状态，然后才能drop这个表。如果直接drop表，会报错：ERROR: Table student is enabled. Disable it first.

```shell
hbase(main):007:0> disable 'person'
0 row(s) in 2.3450 seconds
---------------------------------------------------------------------------------------
hbase(main):008:0> drop 'person' 
0 row(s) in 2.3870 seconds
```

# 数据的增删改查

建表

```shell
hbase(main):009:0> create 'person','info'
0 row(s) in 2.3080 seconds

=> Hbase::Table - person
hbase(main):010:0> list
TABLE                                                                                                                                             
person                                                                                                                                            
1 row(s) in 0.0100 seconds

=> ["person"]
hbase(main):011:0> 
```

## 增

