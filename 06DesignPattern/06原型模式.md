# 原型模式

原型模式(Prototype 模式)：用原型实例指定创建对象的种类，并且通过拷贝这些原型，创建新的对象。说的直接点就是实现`Object`类中的`clone`方法

工作原理：对象.clone()

![](./doc/10.png)

**克隆羊问题**

```java
package com.stanlong;

import lombok.*;

public class DesignPattern {
    public static void main(String[] args) {
        System.out.println("----原型模式-----");

        Sheep sheep = new Sheep("喜羊羊", 10, "白色");
        Sheep sheep1 = (Sheep) sheep.clone();
        Sheep sheep2 = (Sheep) sheep.clone();
        Sheep sheep3 = (Sheep) sheep.clone();

        System.out.println("sheep1 = " + sheep1 );
        System.out.println("sheep2 = " + sheep2 );
        System.out.println("sheep3 = " + sheep3 );
    }
}

@Getter
@Setter
@ToString
@RequiredArgsConstructor
class Sheep implements Cloneable { // 原型类需要声明一个克隆自己的接口
    @NonNull
    private String name;
    @NonNull
    private int age;
    @NonNull
    private String color;

    //克隆该实例，使用默认的clone方法来完成
    @Override
    protected Object clone()  {

        Sheep sheep = null;
        try {
            sheep = (Sheep)super.clone();
        } catch (Exception e) {
            // TODO: handle exception
            System.out.println(e.getMessage());
        }
        // TODO Auto-generated method stub
        return sheep;
    }

}
```

注意点：super.clone()是浅拷贝

深拷贝需要考虑引用类型，实现方法：

1. 重写 clone 方法来实现深拷贝
2. 通过对象序列化实现深拷贝

总结：

- 创建新的对象比较复杂时，可以利用原型模式简化对象的创建过程，同时也能够提高效率
- 不用重新初始化对象，而是动态地获得对象运行时的状态